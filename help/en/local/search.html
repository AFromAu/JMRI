<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />

  <script type="text/javascript" src="search.json"></script>

  <script>
    function openLink(link) {
      document.getElementById("page").src = link;
    }

    function onLoad() {
      window.searchIndexData = JSON.parse(searchIndex);
    }

	function searchHelp() {
		var searchTerm = document.getElementById("searchField").value.toLowerCase();
//		alert(searchTerm);
		var numChars = searchTerm.length;
//		alert(searchTerm + ", " + numChars);
//		let lengthMap = window.searchIndexData.words;
		let wordMap = window.searchIndexData.words[numChars];
		let fileIDs = wordMap[searchTerm];
		if (typeof fileIDs === 'undefined') {
			alert("The search term \""+searchTerm+"\" is not found");
		} else {
            let searchResult = document.getElementById("searchResult");
            while (searchResult.firstChild) {
                searchResult.removeChild(searchResult.lastChild);
            }
            let target = document.getElementById("page");
//			console.log(fileIDs);
			for (i=0; i < fileIDs.length; i++) {
				if (fileIDs[i] != -1) {
					let fileName = window.searchIndexData.files[fileIDs[i]][0];
					let title = window.searchIndexData.files[fileIDs[i]][1];
//					console.log(fileName);
//					console.log(title);
                    var tag = document.createElement("li");
                    var aTag = document.createElement("a");
                    aTag.href = "../../../" + fileName;
                    aTag.onclick = function(){ target.src = "../../../" + fileName; window.scrollTo(0,0); return false; };
                    var text = document.createTextNode(title);
                    aTag.appendChild(text);
                    tag.appendChild(aTag);
                    searchResult.appendChild(tag);
				}
			}
		}
//		console.log(lengthMap[9]);
	}
  </script>

  <style>
.float-container {
    border: 3px solid #fff;
    padding: 20px;
}

.float-child-index {
    width: 30%;
    float: left;
    padding: 20px;
    border: 2px solid black;
}
.float-child-page {
    width: 60%;
    float: left;
    padding: 20px;
    border: 2px solid black;
}
  </style>
</head>
<body onload="onLoad()">
<div class="float-container">
<div class="float-child-index">
<div>
<form>
Enter search term: <input id="searchField" type="text"> <input type="button" value="Search" onclick="searchHelp()">
</form>
</div>
<div>
<p>Search result</p>
<ul id="searchResult">
</ul>
</div>
</div>
<iframe class="float-child-page" id="page" height="800px" src="file:///F:/Projekt/Java/GitHub/JMRI/help/en/index.shtml" title="JMRI Help"></iframe>
</body>
</html>
</html>
