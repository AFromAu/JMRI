<html>
<head>
<title>LogixNG preview - tutorial</title>
</head>

<body>
<table width="800">
<tr>
<td>

<h2>LogixNG Preview Tutorial</h2>

This tutorial has an <a href="#">example profile</a>.

<p>

Menu choice "Tools / Tables / LogixNG" has a sub menu with three tables:
<ul>
<li>LogixNG</li>
<li>LogixNG Modules</li>
<li>LogixNG Tables</li>
</ul>

Select "Tools / Tables / LogixNG / LogixNG" to open the table with the LogixNGs. The other two tables,
"LogixNG Modules" and "LogixNG Tables", are described later in this tutorial.
<p>
On the "Meny" column, select "Edit" for the "Tutorial LogixNG". This brings up a table of ConditionalNGs that are
owned by this LogixNG. Each ConditionalNG in this tutorial has a user name starting with a number and a short
description. These user names are used as headers in this tutorial and demonstrates different things in LogixNG.


<h2>1. Basics</h2>


<h2>99. Local variables and scripts</h2>

A script can use local variables. But local variables only exists during the execution of the action/expression
that defines the local variable. This ConditionalNG uses the same script in three different cases, there the local
variable is a number, a string or does not exist at all.
<p>
The script is in the file AAAAAA.AA. It's loaded by the ExpressionScript expression.






<p>
Select "Edit" for a ConditionalNG to open the ConditionalNG editor.
<p>
A ConditionalNG is a tree of actions and expressions, there some actions and some expressions can have children.
<p>
The editor doesn't know anything about actions nor expressions. Instead, the editor knows about female sockets and
male sockets. The female sockets is the exclamation marks and the question marks, followed by a name, for example "A4".
The name can be any number of letters and digits, starting with a letter.
<p>
The user never sees the male sockets, but each action and expression is encapsulated in a male socket.
<p>
Each ConditionalNG may have a memo there the user may enter some text, for example a description of the ConditionalNG.
Each ConditionalNGs in the example profile has a memo that describes that ConditionalNG.
<p>




<h2>Adding a new action/expression</h2>

See the package jmri.jmrix.loconet.logixng for the classes mentioned in this part.
<p>
How do we add a new action or expression type to LogixNG? Lets assume we want to have an expression that looks at the
LocoNet slot manager and returns true if more that 75% of the slots are not free, false otherwise.
<p>
The first thing to notice is that is expression is LocoNet specific. Which means that it should be in a sub package to
jmri.jmrix.loconet and that the expression should not be available if there is no LocoNet connection. This is easy to
do. LogixNG uses @ServiceProvider to get a list of the available actions and expressions. For example, the class
jmri.jmrit.logixng.expressions.DigitalFactory provides a list of digital expressions. We can add our own factory class
for our LocoNet expression and we can make the method <i>getExpressionClasses()</i> conditional so that it only returns
our class if there is a LocoNet connection active.
<p>
Second, it may be helpful for the user if the LocoNet actions/expressions have their own category. So lets create that.
LogixNG has an "enum" Category, but since Java enums cannot be extended, the LogixNG Category class simulates an enum
without being a true enum class. We add the LocoNet category to the Factory class and let a static initializer in the
Factory class register the LocoNet category.
<p>






</td>
</tr>
</table>
</body>
</html>
