<html>
<head>
<title>LogixNG Tutorial - Chapter 1</title>
<script type="text/javascript" src="/web/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="script.js"></script>
<link rel="stylesheet" href="style.css">
</head>

<body>

<table width="800">
<tr>
<td>


<h1>DANIEL DANIEL DANIEL</h1>



LogixNG tables
<p>
External table (external CSV file)
<br>
Internal table (stored in panel file)
<p>
External: CSV file name. Read-only.
<br>
Internal: x columns, y rows. Column and row headers. Constant/variable size.


<p>
------------------------------------------
<p>

LogixNGs ska kunna enable/disable. Checkbox i table.
<p>
LogixNG ska kunna aktiveras vid start. Slå på/av under körning.
<p>
Alla LogixNG behöver pekare till LogixNG_Manager.
<p>
LogixNG_Manager.isActive()

<p>






<h1>LogixNG Tutorial - Chapter 1</h1>

<h2>LogixNG - What is it?</h2>

LogixNG is similar to Logix. It's a way to define rules, like "If sensor IS1 is Active, then set turnout IT2 to
Thrown". It borrows some concepts from Logix, but it's a complete new design and it can work side by side with
Logix.
<p>
<h2>Setting up a LogixNG and a ConditionalNG</h2>

First, we create a LogixNG. We start <b>PanelPro</b> and select <b>Tools</b> &rArr; <b>Tables</b> &rArr; <b>LogixNG</b>
&rArr; <b>LogixNG</b> to open the table with LogixNGs. Click button <b>Add...</b> to add a new LogixNG. By default, the
checkbox <b>Automatically generate System Name</b> is checked for all items in LogixNG. Click the button <b>Create</b>
to create a LogixNG.

<p>

Create a ConditionalNG

Then we create a ConditionalNG. Click button <b>New ConditionalNG</b> to add a new ConditionalNG. Click the button
<b>Create</b> to create it.

<p>


All actions and expressions in LogixNG are named beans, which means that they have system names and user names. But
it's recommended to only use auto system names and no user names for actions and expressions. Therefore, system names
and user names of actions and expressions are not visible by default. If you want to specify the system names and/or
user names, you can turn on the setting "Show system names and user names" in the LogixNG preferences.
<p>
The most important reason to not use system names and user names for actions and expressions is that it makes it much
easier to copy things. Currently, when a copy is made of actions and/or expressions, the copies get auto names and no
user names. It would be possible to add support for the user to specify system names and/or user names when doing a
copy, but since actions and expressions build a tree, a copy can be of many actions and/or expressions at once.





<h2>1. Basics</h2>

LogixNG has two basic building blocks: Actions and Expressions. Actions do something, for example throw a turnout or
sets a signal mast. Expressions ask something, for example if a sensor is active or if a signal head has a particular
appearance. The actions and expressions forms a tree and a complex logix can be built.

<h3>Categories</h3>

To get some kind of structure of the types of actions and expressions, LogixNG has a number of categories. Then you
create a new action or expression, you first select the category and then the action/expression. Currently, the
categories are:

<ul>
<li>Item - Actions and expressions related to items on the layout, for example turnouts and signal masts</li>
<li>Common - The most important actions and expressions that are not in the category Item</li>
<li>LocoNet - Actions and expressions related to LocoNet</li>
<li>Other - Other actions and expressions</li>
<li>Extravaganza - Things seldom used, included mostly for fun, but maybe useful in some cases.</li>
</ul>

These categories may not be optimal and it would probably be good to have a discussion on the jmri developers mailing
list about these. It's easy to change them, add more categories and to move an action or expression from one category
to another.

<h3>Create an action: ActionTurnout</h3>

One thing one notices when creating an action or expression is that LogixNG is much more powerful than Logix. For now,
we only use "Direct" when entering a turnout. We will look at Reference, Local variable and Formula later in this
tutorial.

<h4>Why is "Delayed Set Turnout" missing?</h4>

Logix has the features "Delayed Set Turnout", "Cancel Timers for Turnout" and "Reset Delayed Set Turnout". These
features are currently not implemented in LogixNG. The reason is that the creator of LogixNG, Daniel Bergqvist, does
not fully understand how the end users want to use this feature. He then had three options:
<ol type="1">
<li>Implement an exact copy of the feature in Logix.</li>
<li>Try to improve the feature of Logix, but without knowing what the end user really wants.</li>
<li>Wait for other developers and end users to start using LogixNG and learn how it works and to let them think thru
what they really want.</li>
</ol>
He chose the third option.
<p>
Then the automobile was first created, it was a horse-drawn carriage there the engine had replaced the horse. After a
while when the engineers had learn more of the possibilities of the engine, they realized that they didn't need to
adapt the cab after the horse, so the modern car was born.
<p>
Maybe the developers and the end users find that the Logix solution with "Delayed Set Turnout" is best. If so, then we
will add that feature. Maybe the developers and the end users find that there is a better way to do it in LogixNG and
if so, we will add that way instead. Or maybe some users want it the old way and some other users want it the new way
and then we might add both solutions. But the point is that Daniel Bergqvist found it's best to wait a moment for other
developers to learn LogixNG first and then have a discussion on how to move forward.

<h3>Remove the action and add the action IfThenElse.</h3>
<h3>Add ExpressionSensor and ActionTurnout</h3>

Lets add a new IfThenAction with a ExpressionSensor and a ActionTurnout. To do this, we need to add the action
Many. We can do this by cutting the IfThenElse expression so it's moved to the clip board, then add the Many
action and then paste the IfThenElse action back.


<h3>Cut the IfThenElse action, add a Many action and paste the IfThenElse action.</h3>





<h2>Using the clipboard</h2>

While editing a ConditionalNG, it can be useful to cut out something and leave it, editing something else, and then
paste it back. For this purpose, LogixNG has a clipboard. Each time you cut an action or expression, it is moved to the
clipboard.
<p>
The clipboard editor works the same way as the ConditionalNG editor, with the exceptions that actions and expressions
are never active while on the clipboard.
<p>
When an action or expression is cut, it will always be put on the first row in the clipboard. This is true even when
you cut an item on the clipboard itself. If you cut an item on the clipboard, that item will be removed from its
current place in the tree and moved to the first row in the tree.
<p>
Note that you can cut an item on any level in the clipboard tree. While editing a ConditionalNG, you may cut a big tree
from the ConditionalNG and you then wants to take only a small sub tree and paste back to the ConditionalNG.
<p>
Example:
* Many
  * IfThenElse
    * If sensor
	* Throw turnout
<p>
You can cut the Many action from the ConditionalNG, then go to the clipboard and expand the Many action and then cut
the IfThenElse action. The IfThenElse action will then be moved to the first row on the clipboard. Now you can go back
to the ConditionalNG and paste the IfThenElse action to the ConditionalNG.
<p>
You can also use the clipbord to move items from one ConditionalNG to another.
<p>
If the popup menu is opened on an item that can be copied, the menu item Copy is enabled. If "Copy" is selected, the
item and its sub tree are copied to the clipboard. Each item gets an auto system name and no user name.



<h2>Stop the power during lunch</h2>

Logix support reading the fast clock. LogixNG also supports reading the system clock. Lets assume you want to cut power
to the layout during the lunch. This can easily be done by the following ConditionalNG:

* IfThenElse
  * If: And
    * E1: Clock: System clock between 12.00 and 13.00
	* E2: Power: Is power ON?
  * Then: Power: Turn power off
  * Else:



</td>
</tr>
</table>
</body>
</html>
