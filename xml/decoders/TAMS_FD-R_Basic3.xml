<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>
<!-- Copyright (C) JMRI 2006 All rights reserved -->
<!--                                                                        -->
<!-- JMRI is free software; you can redistribute it and/or modify it under  -->
<!-- the terms of version 2 of the GNU General Public License as published  -->
<!-- by the Free Software Foundation. See the "COPYING" file for a copy     -->
<!-- of this license.                                                       -->
<!--                                                                        -->
<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT    -->
<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or  -->
<!-- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License  -->
<!-- for more details.                                                      -->
<decoder-config xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" showEmptyPanes="no" xsi:noNamespaceSchemaLocation="http://jmri.org/xml/schema/decoder.xsd">
  <version version="1" author="Pierre Billon" lastUpdated="20211002"/>
  <!-- 1 Creation
		Based on FD-R basic 2 latest definition
  -->
  <decoder>
    <family name="Function decoders (FD)" mfg="Tams Elektronik GmbH">
      <model model="FD-R Basic 3" numOuts="24" numFns="58" productID="FD-R-B3">
      <output name="1" label="F0f|Front light" maxcurrent="300mA"/>
		  <output name="2" label="F0r|Rear light" maxcurrent="300mA"/>
		  <output name="3" label="AUX 3" maxcurrent="100mA"/>
      <output name="4" label="AUX 4" maxcurrent="100mA"/>
        <size length="13" width="9.5" height="3.5" units="mm"/>
        <protocols>
          <protocol>dcc</protocol>
          <protocol>motorola</protocol>
        </protocols>
      </model>
    </family>
    <programming direct="yes" paged="yes" register="yes" ops="yes"/>
    <variables>
      <!-- Calls to std NMRA templates (not in original LD-G-32.xml file)    -->
      <xi:include href="http://jmri.org/xml/decoders/nmra/shortAndLongAddress.xml"/>
      <xi:include href="http://jmri.org/xml/decoders/nmra/cv29speedSteps.xml"/>
      <xi:include href="http://jmri.org/xml/decoders/nmra/cv29direction.xml"/>
      <xi:include href="http://jmri.org/xml/decoders/nmra/cv29analog.xml"/>
      <xi:include href="http://jmri.org/xml/decoders/nmra/mfgVersionId.xml"/>
      <xi:include href="http://jmri.org/xml/decoders/nmra/analogModeFunction.xml"/>
      <!-- Consist address (consist direction bit 7 not supported) -->
      <xi:include href="http://jmri.org/xml/decoders/nmra/consistAddr.xml"/>
    <!-- Definitions for Tams-Elektronik function mapping according to RCN-227 -->
    <xi:include href="http://jmri.org/xml/decoders/rail_community/rcn277mapping.xml"/>
    <!-- Definitions for Railcom/Motorola Panel -->
    <variable item="Enable RailCom" CV="29" mask="XXXXVXXX" default="1">
    <xi:include href="http://jmri.org/xml/decoders/parts/enum-disabledEnabled.xml"/>
    <label>Enable RailCom</label>
    <label xml:lang="fr">RailCom</label>
    <label xml:lang="de">RailCom</label>
    <label xml:lang="it">Abilita RailCom</label>
    </variable>
    <variable item="Feedback on canal 1" CV="28" mask="XXXXXXXV" default="1">
		<xi:include href="http://jmri.org/xml/decoders/parts/enum-disabledEnabled.xml"/>
		<label>Feedback on canal 1</label>
		<label xml:lang="fr">Feedback sur canal 1</label>
		<label xml:lang="de">Kanal 1</label>
	  </variable>
	  <variable item="Feedback on canal 2" CV="28" mask="XXXXXXVX" default="1">
		<xi:include href="http://jmri.org/xml/decoders/parts/enum-disabledEnabled.xml"/>
		<label>Feedback on canal 2</label>
		<label xml:lang="fr">Feedback sur canal 2</label>
		<label xml:lang="de">Kanal 2</label>
	  </variable>
    <variable item="Dynamic canal assignment" CV="28" mask="XXXXXVXX" default="0">
		<xi:include href="http://jmri.org/xml/decoders/parts/enum-disabledEnabled.xml"/>
		<label>Dynamic canal assignment</label>
		<label xml:lang="fr">Canal feedback dynamique</label>
		<label xml:lang="de">Anwendung dynamischer Kanal 1</label>
	  </variable>
    <variable item="Enable RailCom QOS (Quality Of Service)" CV="10" mask="XXXXXXXV" default="1">
		<xi:include href="http://jmri.org/xml/decoders/parts/enum-disabledEnabled.xml"/>
		<label>Enable RailCom QOS (Quality Of Service)</label>
		<label xml:lang="fr">Récupération de la qualité de réception Railcom</label>
		<label xml:lang="de">Dynamische RailCom-Informationen (Empfangsstatistik)</label>
	  </variable>
      <!-- Definitions for Direction dependant controls -->
      <variable item="AUX 2 direction mode" CV="53" mask="XXXXXXVV" tooltip="CV53 Bits 0-1">
        <enumVal>
          <enumChoice choice="Non Directional" value="0">
            <choice>Non Directional</choice>
            <choice xml:lang="fr">Pas d'influence</choice>
            <choice xml:lang="de">Richtungsunabhängig</choice>
          </enumChoice>
          <enumChoice choice="Inactive in Reverse" value="1">
            <choice>Inactive in Reverse</choice>
            <choice xml:lang="fr">Inactif en marche arrière</choice>
            <choice xml:lang="de">Rückwärts aus</choice>
          </enumChoice>
		  <enumChoice choice="Inactive in Forward" value="2">
            <choice>Inactive in Forward</choice>
            <choice xml:lang="fr">Inactif en marche avant</choice>
            <choice xml:lang="de">Vorwärts aus</choice>
          </enumChoice>
        </enumVal>
        <label>AUX 2 direction mode</label>
        <label xml:lang="fr">AUX 2 influence du sens de la marche</label>
        <label xml:lang="de">AUX 2 Richtungsabhängigkeit</label>
      </variable>
      <variable item="AUX 1 direction mode" CV="54" mask="XXXXXXVV" tooltip="CV54 Bits 0-1">
        <enumVal>
          <enumChoice choice="Non Directional" value="0">
            <choice>Non Directional</choice>
            <choice xml:lang="fr">Pas d'influence</choice>
            <choice xml:lang="de">Richtungsunabhängig</choice>
          </enumChoice>
          <enumChoice choice="Inactive in Reverse" value="1">
            <choice>Inactive in Reverse</choice>
            <choice xml:lang="fr">Inactif en marche arrière</choice>
            <choice xml:lang="de">Rückwärts aus</choice>
          </enumChoice>
		  <enumChoice choice="Inactive in Forward" value="2">
            <choice>Inactive in Forward</choice>
            <choice xml:lang="fr">Inactif en marche avant</choice>
            <choice xml:lang="de">Vorwärts aus</choice>
          </enumChoice>
        </enumVal>
        <label>AUX 1 direction mode</label>
        <label xml:lang="fr">AUX 1 influence du sens de la marche</label>
        <label xml:lang="de">AUX 1 Richtungsabhängigkeit</label>
      </variable>
	  <variable item="AUX 3 direction mode" CV="55" mask="XXXXXXVV" tooltip="CV55 Bits 0-1">
        <enumVal>
          <enumChoice choice="Non Directional" value="0">
            <choice>Non Directional</choice>
            <choice xml:lang="fr">Pas d'influence</choice>
            <choice xml:lang="de">Richtungsunabhängig</choice>
          </enumChoice>
          <enumChoice choice="Inactive in Reverse" value="1">
            <choice>Inactive in Reverse</choice>
            <choice xml:lang="fr">Inactif en marche arrière</choice>
            <choice xml:lang="de">Rückwärts aus</choice>
          </enumChoice>
		  <enumChoice choice="Inactive in Forward" value="2">
            <choice>Inactive in Forward</choice>
            <choice xml:lang="fr">Inactif en marche avant</choice>
            <choice xml:lang="de">Vorwärts aus</choice>
          </enumChoice>
        </enumVal>
        <label>AUX 3 direction mode</label>
        <label xml:lang="fr">AUX 3 influence du sens de la marche</label>
        <label xml:lang="de">AUX 3 Richtungsabhängigkeit</label>
      </variable>
      <!-- Shunting lights with F3 or F4 (FD-R Basic)-->
      <variable item="AUX 2 shunting light with F3" CV="53" mask="XXXVXXXX" default="0" tooltip="CV53 Bit 4">
        <xi:include href="http://jmri.org/xml/decoders/parts/enum-OffOn.xml"/>
        <label>AUX 2 shunting light with F3</label>
        <label xml:lang="fr">AUX 2 feux de manoeuvre avec F3</label>
        <label xml:lang="de">AUX 2 Rangierlicht mit F3</label>
      </variable>
      <variable item="AUX 2 shunting light with F4" CV="53" mask="XXVXXXXX" default="0" tooltip="CV53 Bit 5">
        <xi:include href="http://jmri.org/xml/decoders/parts/enum-OffOn.xml"/>
        <label>AUX 2 shunting light with F4</label>
        <label xml:lang="fr">AUX 2 feux de manoeuvre avec F4</label>
        <label xml:lang="de">AUX 2 Rangierlicht mit F4</label>
      </variable>
      <variable item="AUX 1 shunting light with F3" CV="54" mask="XXXVXXXX" default="0" tooltip="CV54 Bit 4">
        <xi:include href="http://jmri.org/xml/decoders/parts/enum-OffOn.xml"/>
        <label>AUX 1 shunting light with F3</label>
        <label xml:lang="fr">AUX 1 feux de manoeuvre avec F3</label>
        <label xml:lang="de">AUX 1 Rangierlicht mit F3</label>
      </variable>
      <variable item="AUX 1 shunting light with F4" CV="54" mask="XXVXXXXX" default="0" tooltip="CV54 Bit 5">
        <xi:include href="http://jmri.org/xml/decoders/parts/enum-OffOn.xml"/>
        <label>AUX 1 shunting light with F4</label>
        <label xml:lang="fr">AUX 1 feux de manoeuvre avec F4</label>
        <label xml:lang="de">AUX 1 Rangierlicht mit F4</label>
      </variable>
	  <variable item="AUX 3 shunting light with F3" CV="55" mask="XXXVXXXX" default="0" tooltip="CV55 Bit 4">
        <xi:include href="http://jmri.org/xml/decoders/parts/enum-OffOn.xml"/>
        <label>AUX 3 shunting light with F3</label>
        <label xml:lang="fr">AUX 3 feux de manoeuvre avec F3</label>
        <label xml:lang="de">AUX 3 Rangierlicht mit F3</label>
      </variable>
      <variable item="AUX 3 shunting light with F4" CV="55" mask="XXVXXXXX" default="0" tooltip="CV55 Bit 5">
        <xi:include href="http://jmri.org/xml/decoders/parts/enum-OffOn.xml"/>
        <label>AUX 3 shunting light with F4</label>
        <label xml:lang="fr">AUX 3 feux de manoeuvre avec F4</label>
        <label xml:lang="de">AUX 3 Rangierlicht mit F4</label>
      </variable>
      <!-- Definitions for Dimming FD-R basic 2  -->
      <variable item="AUX 2 Dim" CV="49" default="64" tooltip="CV49">
        <decVal min="1" max="64"/>
        <label>AUX 2 Dim</label>
      </variable>
      <variable item="AUX 1 Dim" CV="50" default="64" tooltip="CV50">
        <decVal min="1" max="64"/>
        <label>AUX 1 Dim</label>
      </variable>
	  <variable item="AUX 3 Dim" CV="51" default="64" tooltip="CV51">
        <decVal min="1" max="64"/>
        <label>AUX 3 Dim</label>
      </variable>
      <!-- Output mode definitions for FD-R-Basic -->
      <variable item="AUX 2 before ON phase" CV="58" tooltip="CV58" default="255">
        <decVal min="0" max="255"/>
        <label>AUX 2 before ON phase</label>
        <label xml:lang="fr">AUX 2 phase avant ON</label>
        <label xml:lang="de">AUX 2 Dauer bis zum Einschalten</label>
      </variable>
	  <variable item="AUX 2 ON phase" CV="61" tooltip="CV61" default="0">
        <decVal min="0" max="255"/>
        <label>AUX 2 ON phase</label>
        <label xml:lang="fr">AUX 2 phase ON</label>
        <label xml:lang="de">AUX 2 Dauer Ein innerhalb einer Phase</label>
      </variable>
	  <variable item="AUX 1 before ON phase" CV="59" tooltip="CV59" default="255">
        <decVal min="0" max="255"/>
        <label>AUX 1 before ON phase</label>
        <label xml:lang="fr">AUX 1 phase avant ON</label>
        <label xml:lang="de">AUX 1 Dauer bis zum Einschalten</label>
      </variable>
	  <variable item="AUX 1 ON phase" CV="62" tooltip="CV62" default="0">
        <decVal min="0" max="255"/>
        <label>AUX 1 ON phase</label>
        <label xml:lang="fr">AUX 1 phase ON</label>
        <label xml:lang="de">AUX 1 Dauer Ein innerhalb einer Phase</label>
      </variable>
	  <variable item="AUX 3 before ON phase" CV="60" tooltip="CV60" default="255">
        <decVal min="0" max="255"/>
        <label>AUX 3 before ON phase</label>
        <label xml:lang="fr">AUX 3 phase avant ON</label>
        <label xml:lang="de">AUX 3 Dauer bis zum Einschalten</label>
      </variable>
	  <variable item="AUX 3 ON phase" CV="63" tooltip="CV63" default="0">
        <decVal min="0" max="255"/>
        <label>AUX 3 ON phase</label>
        <label xml:lang="fr">AUX 3 phase ON</label>
        <label xml:lang="de">AUX 3 Dauer Ein innerhalb einer Phase</label>
      </variable>
      <!-- Flash frequency configuration   -->
      <variable item="Common flashing frequency" CV="9" tooltip="CV9 (0: high, 255: low)" default="0">
        <decVal min="0" max="255"/>
        <label>Common flashing frequency</label>
        <label xml:lang="fr">Fréquence de clignotement commune</label>
        <label xml:lang="de">Gemeinsame Blinkfrequenz</label>
      </variable>
    </variables>
    <resets>
      <factReset label="Reset All CVs" CV="8" default="8">
         <label xml:lang="it">Reset delle CV ai valori di fabbrica</label>
      </factReset>
    </resets>
  </decoder>
  <!-- RailComconfiguration   -->
  <pane>
    <column>
      <display item="Enable RailCom" label="RailCom"/>
      <label>
        <text> </text>
      </label>
	  <display item="Feedback on canal 1"/>
      <label>
        <text> </text>
      </label>
	  <display item="Feedback on canal 2"/>
      <label>
        <text> </text>
      </label>
      <display item="Dynamic canal assignment"/>
        <label>
          <text> </text>
        </label>
        <display item="Enable RailCom QOS (Quality Of Service)"/>
          <label>
            <text> </text>
          </label>
      <label>
        <text> </text>
      </label>
    </column>
    <name>RailCom</name>
  </pane>
  <!-- RailCom configuration   -->
  <!-- Direction control    -->
  <pane>
    <column>
      <label>
        <text> </text>
      </label>
      <label>
        <text> </text>
      </label>
      <row>
        <column>
          <row>
            <column>
              <label>
                <text> </text>
              </label>
              <display item="AUX 1 direction mode"/>
              <label>
                <text> </text>
              </label>
            </column>
            <column>
              <label>
                <text>                                          </text>
              </label>
            </column>
            <column>
              <label>
                <text> </text>
              </label>
              <label>
                <text>AUX 1 shunting light with  </text>
                <text xml:lang="fr">AUX 1 feux de manoeuvre avec  </text>
                <text xml:lang="de">AUX 1 Rangierlicht mit  </text>
              </label>
              <label>
                <text> </text>
              </label>
            </column>
            <column>
              <row>
                <display item="AUX 1 shunting light with F3" format="checkbox" layout="above" label="F3"/>
                <display item="AUX 1 shunting light with F4" format="checkbox" layout="above" label="F4"/>
              </row>
              <label>
                <text> </text>
              </label>
            </column>
          </row>
          <row>
            <column>
              <row>
                <display item="AUX 1 Dim"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 1 Dim" label="" format="hslider"/>
              </row>
            </column>
            <column>
              <label>
                <text>              </text>
              </label>
            </column>
            <column>
              <row>
                <display item="AUX 1 before ON phase"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 1 before ON phase" label="" format="hslider"/>
              </row>
			  <row>
                <display item="AUX 1 ON phase"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 1 ON phase" label="" format="hslider"/>
              </row>
            </column>
          </row>
        </column>
      </row>
      <label>
        <text> </text>
      </label>
      <label>
        <text> </text>
      </label>
      <separator/>
      <label>
        <text> </text>
      </label>
      <row>
        <column>
          <row>
            <column>
              <label>
                <text> </text>
              </label>
              <display item="AUX 2 direction mode"/>
              <label>
                <text> </text>
              </label>
            </column>
            <column>
              <label>
                <text>                                          </text>
              </label>
            </column>
            <column>
              <label>
                <text> </text>
              </label>
              <label>
                <text>AUX 2 shunting light with  </text>
                <text xml:lang="fr">AUX 2 feux de manoeuvre avec  </text>
                <text xml:lang="de">AUX 2 Rangierlicht mit  </text>
              </label>
              <label>
                <text> </text>
              </label>
            </column>
            <column>
              <row>
                <display item="AUX 2 shunting light with F3" format="checkbox" layout="above" label="F3"/>
                <display item="AUX 2 shunting light with F4" format="checkbox" layout="above" label="F4"/>
              </row>
              <label>
                <text> </text>
              </label>
            </column>
          </row>
          <row>
            <column>
              <row>
                <display item="AUX 2 Dim"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 2 Dim" label="" format="hslider"/>
              </row>
            </column>
            <column>
              <label>
                <text>              </text>
              </label>
            </column>
            <column>
              <row>
                <display item="AUX 2 before ON phase"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 2 before ON phase" label="" format="hslider"/>
              </row>
			  <row>
                <display item="AUX 2 ON phase"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 2 ON phase" label="" format="hslider"/>
              </row>
            </column>
          </row>
        </column>
      </row>
      <label>
        <text> </text>
      </label>
      <label>
        <text> </text>
      </label>
      <separator/>
	  <label>
        <text> </text>
      </label>
      <row>
        <column>
          <row>
            <column>
              <label>
                <text> </text>
              </label>
              <display item="AUX 3 direction mode"/>
              <label>
                <text> </text>
              </label>
            </column>
            <column>
              <label>
                <text>                                          </text>
              </label>
            </column>
            <column>
              <label>
                <text> </text>
              </label>
              <label>
                <text>AUX 3 shunting light with  </text>
                <text xml:lang="fr">AUX 3 feux de manoeuvre avec  </text>
                <text xml:lang="de">AUX 3 Rangierlicht mit  </text>
              </label>
              <label>
                <text> </text>
              </label>
            </column>
            <column>
              <row>
                <display item="AUX 3 shunting light with F3" format="checkbox" layout="above" label="F3"/>
                <display item="AUX 3 shunting light with F4" format="checkbox" layout="above" label="F4"/>
              </row>
              <label>
                <text> </text>
              </label>
            </column>
          </row>
          <row>
            <column>
              <row>
                <display item="AUX 3 Dim"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 3 Dim" label="" format="hslider"/>
              </row>
            </column>
            <column>
              <label>
                <text>              </text>
              </label>
            </column>
            <column>
              <row>
                <display item="AUX 3 before ON phase"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 3 before ON phase" label="" format="hslider"/>
              </row>
			  <row>
                <display item="AUX 3 ON phase"/>
                <label>
                  <text> </text>
                </label>
                <display item="AUX 3 ON phase" label="" format="hslider"/>
              </row>
            </column>
          </row>
        </column>
      </row>
      <label>
        <text> </text>
      </label>
      <label>
        <text> </text>
      </label>
      <separator/>
      <label>
        <text> </text>
      </label>
      <label>
        <text> </text>
      </label>
      <row>
        <display item="Common flashing frequency"/>
        <!-- FD-R Basic -->
        <label>
          <text> </text>
        </label>
        <display item="Common flashing frequency" label="" format="hslider"/>
      </row>
      <label>
        <text> </text>
      </label>
    </column>
    <name>AUX</name>
  </pane>
</decoder-config>
