<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>

<!-- Copyright (C) JMRI 2021 All rights reserved   -->
<!-- LOCONETLNCVMODE requires 3 elements to address an LNCV module on LocoNet:
1. Article Number (aka type/class ID) = decoder model productID (integer)
2. Module Address (optional, see below)
3. CV number
For processing by JMRI LnOpsProgrammer, elements 1. and 3. are combined in the CV number e.g., "1.3".
Uhlenbrock and Digikeijs/Digirails publish the Article number for each (new) device.
The Uhlenbrock Power4 has an Article number 6324, which was registered with Uhlenbrock.
Older LNCV devices may not have their own address, or even no article. They can be programmed using
Broadcast mode, but you have to be sure only one such device is powered, as they all would respond to
programming commands. See LNCV help in help/en/package/jmri/jmrix/loconet/swing/lncvprog/LncvProgPane.shtml -->

<decoder-config xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://jmri.org/xml/schema/decoder.xsd" showEmptyPanes="no">
    <version author="Egbert Broerse" version="1.0" lastUpdated="20210205"/>
    <!-- version 1 - new decoder definition using new programming mode LOCONETLNCVMODE, requires JMRI 4.22 -->

    <decoder>
        <family name="Booster" mfg="Uhlenbrock Elektronik" type="stationary">
            <model model="Power4" productID="6324" maxTotalCurrent="3.5A" formFactor="Stationary" comment="3.5A Multiprotocol Booster">
              <versionCV />
              <size length="104" width="58" height="33" units="mm" />
            </model>
        </family>

        <programming direct="no" paged="no" register="no" ops="no">
          <mode>LOCONETLNCVMODE</mode>
        </programming>

        <variables>
            <variable CV="6324.0" item="Long Address" mask="VVVVVVVVVVVVVV" default="1" comment="Board address" >
              <decVal min="0" max="65534"/>
              <label xml:lang="it">Indirizzo Primario: </label>
              <label xml:lang="fr">Adresse décodeur: </label>
              <label xml:lang="de">Decoderadresse: </label>
              <label xml:lang="nl">Decoderadres: </label>
              <label>Decoder Address: </label>
              <tooltip>Enter as decimal value (1-65534)</tooltip>
            </variable>
            <variable CV="6324.1" item="Decoder Version" readOnly="yes">
              <decVal/>
              <label xml:lang="it">Versione Booster: </label>
              <label xml:lang="fr">Version Booster: </label>
              <label xml:lang="de">Verstärker Version: </label>
              <label xml:lang="nl">Booster firmware-versie: </label>
              <label>Booster Firmware Version: </label>
            </variable>

            <variable CV="6324.3" item="Configuration" default="92">
              <decVal/>
              <label xml:lang="de">Gesamtwert LNCV3: </label>
              <label xml:lang="nl">Gecombineerde waarde LNCV3: </label>
              <label>Combined LNCV3 Value: </label>
              <tooltip>Intended for verification only, set options below.</tooltip>
            </variable>
            <variable CV="6324.3" mask="XXXXXXXV" item="Ignore DIP Switches" default="0">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label xml:lang="de">CV5 bestimmt Kontroll</label>
              <label xml:lang="nl">Boosterbesturing instellen met CV5</label>
              <label>Use CV5 for Booster Control</label>
              <tooltip>On: Set in CV5 (belo). Off: Set using DIP hardware switches.</tooltip>
              <tooltip xml:lang="de">Ein: CV5 (hier unten) bestimmt Steuerung des Verstärkers. Aus: Eingabe mit DIP Schalter</tooltip>
              <tooltip xml:lang="nl">Aan: CV5 (hieronder) bepaalt besturing Booster. Uit: Stel in met DIP schakelaars</tooltip>
            </variable>
            <variable CV="6324.3" mask="XXXXXXVX" item="Switch STOP/GO" default="0">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label xml:lang="de">Einschalten mit GO/STOP</label>
              <label xml:lang="nl">Inschakelen met GO/STOP</label>
              <label>Turn on/off by LocoNet GO/STOP</label>
              <tooltip>Booster switches on/off by LocoNet GO/STOP instruction (GPON/GPOFF). Off: Signal on selected input switches booster on/off</tooltip>
              <tooltip xml:lang="de">Booster schalten mit LocoNet GO/STOP Berichte (GPON/GPOFF). Aus: Steuersignal schaltet Verstärker ein/aus.</tooltip>
              <tooltip xml:lang="nl">Booster inschakelen met LocoNet GO/STOP instructie (GPON/GPOFF). Uit: Ingestelde ingangssignaal schakelt booster aan/uit</tooltip>
            </variable>
            <variable CV="6324.3" mask="XXXXXVXX" item="Booster All" default="1">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label xml:lang="de">Verstärker zusammen schalten</label>
              <label xml:lang="nl">Alle Boosters gelijk aan/uit</label>
              <label>All Boosters Off</label>
              <tooltip>On: At Power Off, send a LocoNet GPOFF message to the Command Station turning off all boosters</tooltip>
              <tooltip xml:lang="de">Ein: Beim Ausschalten ein GPOFF Bericht and die Zentrale senden damit alle Verstärker ausgeschaltet werden</tooltip>
              <tooltip xml:lang="nl">Aan: Bij uitschakelen een GPOFF bericht sturen aan de centrale om alle boosters uit te schakelen.</tooltip>
            </variable>
            <variable CV="6324.3" mask="XXXXVXXX" item="Signal Off to Input" default="1">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label xml:lang="de">Sende Ein/Aus über Eingang</label>
              <label xml:lang="nl">Verstuur Aan/uit op Ingang</label>
              <label>Signal Off to Input</label>
              <tooltip>On: At Power Off, send status to Input (Märklin or Lenz DCC Booster Input)</tooltip>
              <tooltip xml:lang="de">Ein: Beim Ausschalten signal über Eingang senden (Märklin or Lenz DCC Booster Eingang)</tooltip>
              <tooltip xml:lang="nl">Aan: Uitschakelen melden op de Booster Ingang (Märklin or Lenz DCC Booster Input)</tooltip>
            </variable>
            <variable CV="6324.3" mask="XXXVXXXX" item="Send Short" default="1">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label xml:lang="de">Versendet Kurzschluss-bericht</label>
              <label xml:lang="fr">Envoie un rapport á court-circuit</label>
              <label xml:lang="nl">Stuur LN bericht bij kortsluiting</label>
              <label>Send Short Detected LN-message</label>
              <tooltip>Booster sends a special L.NET report if there is a short circuit or temperature shut down, enabling the control unit to display which booster has a short circuit.</tooltip>
              <tooltip xml:lang="de">Booster versendet bei Kurzschluss oder Temperaturüberschritt einen besonderen L.NET Bericht damit die Kontrolleinheit anzeigen kann welcher Booster einen Kurzschluss hatte.</tooltip>
              <tooltip xml:lang="nl">De booster verstuurt bij kortsluiting of te hoge temperatuur een speciaal bericht op LocoNet zodat de centrale de status kan tonen.</tooltip>
            </variable>
            <variable CV="6324.3" mask="XXVXXXXX" item="Invert Outputs" default="0">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label xml:lang="de">Booster Output Umgepolt</label>
              <label xml:lang="fr">Booster á polarité inversé́</label>
              <label xml:lang="nl">Uitgangen Omgekeerd</label>
              <label>Invert Output Polarity</label>
              <tooltip>Reverse booster output polarity (to correct crossed wires)</tooltip>
              <tooltip xml:lang="de">Booster Ausgang Umgepolt (Korrigiert Anschlusskabel)</tooltip>
              <tooltip xml:lang="nl">Keer polariteit van de uitgangen om (ongekeerde aansluitingen)</tooltip>
              <tooltip xml:lang="fr">Le polarité des sorties du booster sont inversé (cable)</tooltip>
            </variable>
            <variable CV="6324.3" mask="XVXXXXXX" item="Cut Out" default="1">
              <xi:include href="http://jmri.org/xml/decoders/parts/enum-NoYes.xml"/>
              <label>Cut Out Hardware</label>
              <label xml:lang="de">Cut Out</label>
              <label xml:lang="nl">Cut Out</label>
              <tooltip>Cut Out Hardware activated (required for Selectrix operation)</tooltip>
              <tooltip xml:lang="de">Cut Out Hardware aktiviert (für Selectrix Betrieb)</tooltip>
              <tooltip xml:lang="nl">Schakel Cut Out Hardware in (vereist voor Selectrix)</tooltip>
            </variable>

            <variable CV="6324.4" item="Starting Phase Wait" default="6">
              <decVal min="0" max="255"/>
              <label>Starting phase wait period: </label>
              <tooltip>Waiting period in 0.5 s steps. The standard value is equivalent to approx. 3 seconds</tooltip>
            </variable>
            <!-- no choice, but item="Action Mode" is required to hide elements in UI unless it's a LocoServo -->
            <variable CV="6324.5" mask="XXXXXXVV" comment="bits 0-1" item="Booster Control" default="0">
              <enumVal>
                <enumChoice choice="0" value="0">
                  <choice>LocoNet Input</choice>
                </enumChoice>
                <enumChoice choice="0" value="1">
                  <choice>DCC Booster Input (Lenz CDE)</choice>
                  <choice xml:lang="de">DCC Verstärker Eingang (Lenz CDE)</choice>
                </enumChoice>
                <enumChoice choice="0" value="2">
                  <choice>Märklin Booster Input</choice>
                  <choice xml:lang="de">Märklin Verstärker Eingang</choice>
                </enumChoice>
              </enumVal>
              <label>Booster Control:</label>
              <label xml:lang="de">Verstärker-steuerung:</label>
              <label xml:lang="nl">Booster-besturing:</label>
              <tooltip>Instead of the dip switches, set CV3 bit 0 to 1 and this choice will apply</tooltip>
            </variable>
            <variable CV="6324.6" readOnly="yes" item="Temperature">
              <decVal max="255"/>
              <label xml:lang="de">Temperatur in Grad °C: </label>
              <label xml:lang="fr">Température (ºC): </label>
              <label xml:lang="nl">Temperatuur (ºC): </label>
              <label>Operating Temperature (ºC): </label>
            </variable>
            <variable CV="6324.7" readOnly="yes" item="Load">
              <decVal max="100"/>
              <label xml:lang="de">Belastungsprozentsatz: </label>
              <label xml:lang="fr">Pourcentage de charge: </label>
              <label xml:lang="nl">Huidige belasting (%): </label>
              <label>Power Load (%): </label>
            </variable>
            <variable CV="6324.8" item="Switch Address" default="0">
              <decVal min="1" max="2047"/>
              <label xml:lang="de">Adresse Ein-/Ausschalten: </label>
              <label xml:lang="fr">Adresse de commutation: </label>
              <label xml:lang="nl">Adres voor Aan/Uit: </label>
              <label>Booster On/Off Address: </label>
              <tooltip>Solenoid address to turn single booster on or off</tooltip>
              <tooltip xml:lang="de">Adresse schalten um Booster ein oder aus zu schalten</tooltip>
              <tooltip xml:lang="fr">Adresse de commutation pour allumer ou éteindre le booster</tooltip>
              <tooltip xml:lang="nl">Magnetisch artikeladres voor Individuele uitschakeling van een booster</tooltip>
            </variable>
            <variable CV="6324.9" item="Braking Signal" default="6">
              <decVal min="0" max="255"/>
              <label>Braking Signal Data: </label>
              <tooltip>Data for braking signal (not explained in manual)</tooltip>
            </variable>
            <variable CV="6324.10" item="DCC Cutout Time" default="63">
              <decVal min="0" max="255"/>
              <label>DCC CutOut Time: </label>
              <tooltip>DCC CutOut time in 7.5 µseconds steps</tooltip>
            </variable>
              <variable CV="6324.11" item="Restart Wait" default="20">
                <decVal min="0" max="255"/>
                <label xml:lang="de">Einschaltzeit nach Kurzschluss: </label>
                <label xml:lang="fr">Activation d'après court-circuit: </label>
                <label xml:lang="nl">Wachttijd na kortsluiting: </label>
                <label>Restart Wait after Short: </label>
                <tooltip>Turn on automatically following a short circuit in 0.5 s steps. The standard value is equivalent to approx. 10 seconds. 0 turns off auto restart.</tooltip>
                <tooltip xml:lang="de">Automatisches Einschalten nach einem Kurzschluss im 0,5 s Takt. Der Standardwert entspricht ca. 10 Sekunden. Wert 0: kein autom. Einschalten</tooltip>
                <tooltip xml:lang="fr">Activation automatique si court-circuit en étapes de 0,5 s. La valeur standard équivaut à env. 10 secondes. Valeur 0: automatique désactivé.</tooltip>
                <tooltip xml:lang="nl">Wachttijd tot de herstart na kortsluiting. De standaardwaarde ca. 10 secondes. (Het instellen gebeurt in stappen van 0,5 s)</tooltip>
              </variable>

        </variables>
    </decoder>

    <pane>
        <name>LNCV Configuration</name>
        <name xml:lang="de">LNCV Konfiguration</name>
        <name xml:lang="nl">LNCV instellingen</name>
        <row>
            <column>
              <display item="Switch Address"/>
              <separator/>

              <label>
                <text> </text>
              </label>

              <label>
                <text>Current Status</text>
                <text xml:lang="de">Aktueller Zustand</text>
                <text xml:lang="fr">Condition Actuelle</text>
                <text xml:lang="nl">Actuele Status</text>
              </label>
              <separator/>
              <display item="Temperature"/>
              <display item="Load"/>
            </column>

            <column>
                <label>
                  <text>Before writing, open a Programming</text>
                  <text xml:lang="nl">Voordat je waarden schrijft eerst</text>
                  <text xml:lang="de">Bevor man Werten schreiben darf, zuerst mit Hilfe des LNCV</text>
                </label>
                <label>
                  <text>session using the LocoNet LNCV Tool.</text>
                  <text xml:lang="nl">een Programmeersessie starten met het LocoNet LNCV Gereedschap.</text>
                  <text xml:lang="de">Werkzeugs einen LNCV Programmieraufgang starten.</text>
                </label>
                <label>
                  <text> </text>
                </label>

                <label>
                  <text>LNCV3 Configuration</text>
                  <text xml:lang="nl">Instelling LNCV3</text>
                  <text xml:lang="de">LNCV3 Konfiguration</text>
                  <text xml:lang="fr">Configuration LNCV3</text>
                </label>
                <separator/>
                <display item="Configuration"/>
                <display item="Switch STOP/GO" format="checkbox"/>
                <display item="Booster All" format="checkbox"/>
                <display item="Signal Off to Input" format="checkbox"/>
                <display item="Send Short" format="checkbox"/>
                <display item="Invert Outputs" format="checkbox"/>
                <display item="Cut Out" format="checkbox"/>
                <display item="Ignore DIP Switches" format="checkbox"/>

                <group>
                  <qualifier>
                    <variableref>Ignore DIP Switches</variableref>
                    <relation>eq</relation>
                    <value>1</value>
                  </qualifier>
                  <row>
                    <display item="Booster Control"/>
                  </row>
                  <separator/>
                </group>
            </column>

            <column>
                <label>
                  <text>Time Settings</text>
                  <text xml:lang="nl">Tijdinstellingen</text>
                  <text xml:lang="de">Zeiteinstellungen</text>
                  <text xml:lang="fr">Configuration Temporelle</text>
                </label>
                <separator/>
                <row>
                  <display item="Starting Phase Wait"/>
                  <display item="Starting Phase Wait" label="" format="hslider"/>
                </row>
                <row>
                  <display item="Restart Wait"/>
                  <display item="Restart Wait" label="" format="hslider"/>
                </row>
                <row>
                  <display item="DCC Cutout Time"/>
                  <display item="DCC Cutout Time" label="" format="hslider"/>
                </row>

                <label>
                  <text> </text>
                </label>
                <row>
                  <display item="Braking Signal"/>
                  <display item="Braking Signal" label="" format="hslider"/>
                </row>
            </column>
        </row>
    </pane>

</decoder-config>
